generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum AjudaStatus {
  SIM
  NAO
  COM_AJUDA
}

model area_atuacao {
  id                    Int                     @id @default(autoincrement())
  nome                  String                  @db.VarChar(100)
  registro_profissional registro_profissional[]
}

model cargo {
  id                    Int                     @id @default(autoincrement())
  nome                  String                  @db.VarChar(100)
  registro_profissional registro_profissional[]
}

model cliente {
  id                  String              @id @default(uuid())
  nome                String?
  status              String?
  perfil_acesso       String?
  senha               String?
  token_redefinicao   String?
  validade_token      DateTime?
  criado_em           DateTime            @default(now())
  atualizado_em       DateTime            @updatedAt
  cpf                 String?
  dataEntrada         DateTime?
  dataNascimento      DateTime?
  dataSaida           DateTime?
  emailContato        String?             @unique
  senha_atualizada_em DateTime?
  arquivos            arquivos[]
  enderecos           cliente_endereco[]
  cuidadores          cuidador[]
  dadosEscola         dados_escola?
  dadosPagamento      dados_pagamento?
  ocp                 ocp[]
  sessao              sessao[]
  terapeuta           terapeuta_cliente[]
  relatorios          relatorio[]
  anamneses           Anamnese[]

  @@index([nome], map: "nome_idx")
}

model cuidador {
  id               Int                @id @default(autoincrement())
  relacao          String?
  descricaoRelacao String?
  nome             String?
  cpf              String             @db.Char(11)
  profissao        String?
  escolaridade     String?
  telefone         String?
  email            String?
  clienteId        String
  enderecoId       Int?
  dataNascimento   DateTime           @db.Date
  cliente          cliente            @relation(fields: [clienteId], references: [id])
  endereco         endereco?          @relation(fields: [enderecoId], references: [id])
  anamneses        AnamneseCuidador[]

  @@unique([clienteId, cpf], name: "unique_cuidador")
  @@index([enderecoId], map: "cuidador_enderecoId_fkey")
}

model cliente_endereco {
  id              Int      @id @default(autoincrement())
  clienteId       String
  enderecoId      Int
  outroResidencia String?
  residenciaDe    String?
  cliente         cliente  @relation(fields: [clienteId], references: [id])
  endereco        endereco @relation(fields: [enderecoId], references: [id])

  @@index([clienteId], map: "cliente_endereco_clienteId_fkey")
  @@index([enderecoId], map: "cliente_endereco_enderecoId_fkey")
}

model dados_pagamento {
  id                Int      @id @default(autoincrement())
  clienteId         String   @unique
  nomeTitular       String?
  numeroCarteirinha String?
  telefone1         String?
  telefone2         String?
  telefone3         String?
  email1            String?
  email2            String?
  email3            String?
  sistemaPagamento  String
  prazoReembolso    String?
  numeroProcesso    String?
  nomeAdvogado      String?
  telefoneAdvogado1 String?
  telefoneAdvogado2 String?
  telefoneAdvogado3 String?
  emailAdvogado1    String?
  emailAdvogado2    String?
  emailAdvogado3    String?
  houveNegociacao   String?
  valorAcordado     String?
  criado_em         DateTime @default(now())
  atualizado_em     DateTime @updatedAt
  cliente           cliente  @relation(fields: [clienteId], references: [id])
}

model dados_escola {
  id         Int              @id @default(autoincrement())
  clienteId  String           @unique
  tipoEscola String
  nome       String?
  telefone   String?
  email      String?
  enderecoId Int?
  cliente    cliente          @relation(fields: [clienteId], references: [id])
  endereco   endereco?        @relation(fields: [enderecoId], references: [id])
  contatos   escola_contato[]

  @@index([enderecoId], map: "dados_escola_enderecoId_fkey")
}

model escola_contato {
  id            Int          @id @default(autoincrement())
  dadosEscolaId Int
  nome          String?
  telefone      String?
  email         String?
  funcao        String?
  dadosEscola   dados_escola @relation(fields: [dadosEscolaId], references: [id])

  @@index([dadosEscolaId], map: "escola_contato_dadosEscolaId_fkey")
}

model arquivos {
  id                  Int        @id @default(autoincrement())
  clienteId           String?
  terapeutaId         String?
  tipo                String?
  descricao_documento String?
  arquivo_id          String?
  mime_type           String?
  tamanho             Int?
  data_upload         DateTime   @default(now())
  cliente             cliente?   @relation(fields: [clienteId], references: [id])
  terapeuta           terapeuta? @relation(fields: [terapeutaId], references: [id])

  @@index([tipo])
  @@index([clienteId], map: "arquivos_clienteId_fkey")
  @@index([terapeutaId], map: "arquivos_terapeutaId_fkey")
}

model relatorio {
  id                     String   @id @default(uuid())
  titulo                 String
  tipo                   String
  status                 String   @default("final")
  periodo_inicio         DateTime
  periodo_fim            DateTime
  observacoes_clinicas   String?  @db.LongText
  filtros                Json?
  dados_gerados          Json?
  pdf_arquivo_id         String?
  pdf_nome               String?
  pdf_mime               String?
  pdf_tamanho            Int?
  pasta_relatorios_drive String?
  clienteId              String
  terapeutaId            String
  criado_em              DateTime @default(now())
  atualizado_em          DateTime @updatedAt
  area                   String   @default("fonoaudiologia")

  cliente   cliente   @relation(fields: [clienteId], references: [id])
  terapeuta terapeuta @relation(fields: [terapeutaId], references: [id])

  @@index([clienteId], map: "relatorio_clienteId_idx")
  @@index([terapeutaId], map: "relatorio_terapeutaId_idx")
  @@index([periodo_inicio, periodo_fim], map: "relatorio_periodo_idx")
  @@index([clienteId, area], map: "relatorio_clienteId_area_idx")
  @@index([area], map: "relatorio_area_idx")
}

model endereco {
  id                 Int                @id @default(autoincrement())
  cep                String?            @db.Char(8)
  rua                String?            @db.VarChar(255)
  numero             String?            @db.VarChar(10)
  bairro             String?            @db.VarChar(100)
  cidade             String?            @db.VarChar(100)
  uf                 String?            @db.Char(2)
  complemento        String             @default("")
  criado_em          DateTime           @default(now())
  atualizado_em      DateTime           @updatedAt
  cliente_endereco   cliente_endereco[]
  cuidador           cuidador[]
  escola             dados_escola[]
  pessoa_juridica    pessoa_juridica[]
  terapeuta_endereco terapeuta[]

  @@unique([cep, rua, numero, bairro, cidade, uf, complemento], name: "unique_endereco")
  @@index([cep])
  @@index([cidade, uf])
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
model terapeuta {
  id                    String                  @id @default(uuid())
  nome                  String
  email                 String                  @unique
  email_indigo          String                  @unique
  celular               String
  telefone              String?
  cpf                   String                  @unique
  data_nascimento       DateTime
  possui_veiculo        Boolean                 @default(false)
  placa_veiculo         String?
  modelo_veiculo        String?
  banco                 String?
  agencia               String?
  conta                 String?
  chave_pix             String?
  valor_hora            Decimal?                @db.Decimal(10, 2)
  professor_uni         Boolean                 @default(false)
  endereco_id           Int?
  data_entrada          DateTime
  data_saida            DateTime?
  perfil_acesso         String
  atividade             Boolean                 @default(true)
  senha                 String?                 @db.VarChar(255)
  token_redefinicao     String?
  validade_token        DateTime?
  criado_em             DateTime                @default(now())
  atualizado_em         DateTime                @updatedAt
  pix_tipo              String?
  senha_atualizada_em   DateTime?
  arquivos              arquivos[]
  formacao              formacao?
  ocp                   ocp[]                   @relation("TerapeutaOcp")
  pessoa_juridica       pessoa_juridica?
  registro_profissional registro_profissional[]
  sessao                sessao[]
  endereco              endereco?               @relation(fields: [endereco_id], references: [id])
  cliente               terapeuta_cliente[]
  supervisor            vinculo_supervisao[]    @relation("ClinicoVinculo")
  supervisionados       vinculo_supervisao[]    @relation("SupervisorVinculo")
  disciplina            disciplina[]            @relation("disciplinaToterapeuta")
  relatorios            relatorio[]
  anamneses             Anamnese[]

  @@index([atividade])
  @@index([nome])
  @@index([endereco_id], map: "terapeuta_endereco_id_fkey")
}

model Anamnese {
  id                                                           String                            @id @default(uuid())
  cliente_id                                                   String
  terapeuta_id                                                 String
  data_entrevista                                              DateTime                          @db.Date
  cliente_nome                                                 String
  cliente_avatar_url                                           String?                           @db.Text
  data_nascimento                                              DateTime                          @db.Date
  idade                                                        String
  informante                                                   String
  parentesco                                                   String
  parentesco_descricao                                         String?
  quem_indicou                                                 String
  profissional_nome                                            String
  escola_cliente                                               String?
  status                                                       String?
  queixa_principal                                             String                            @db.Text
  diagnostico_previo                                           String                            @db.Text
  suspeita_condicao_associada                                  String                            @db.Text
  cuidadores_principais                                        String?                           @db.Text
  tempo_tela                                                   String?
  gestacao_parto_tipo_parto                                    String?
  gestacao_parto_semanas                                       Int?
  gestacao_parto_apgar_1min                                    Int?
  gestacao_parto_apgar_5min                                    Int?
  gestacao_parto_intercorrencias                               String                            @db.Text
  neuropsicomotor_sustentou_cabeca_meses                       String?
  neuropsicomotor_sustentou_cabeca_status                      String?
  neuropsicomotor_sustentou_cabeca_nao_realiza                 Boolean?
  neuropsicomotor_sustentou_cabeca_nao_soube_informar          Boolean?
  neuropsicomotor_sustentou_cabeca_nao                         Boolean?
  neuropsicomotor_rolou_meses                                  String?
  neuropsicomotor_rolou_status                                 String?
  neuropsicomotor_rolou_nao_realiza                            Boolean?
  neuropsicomotor_rolou_nao_soube_informar                     Boolean?
  neuropsicomotor_rolou_nao                                    Boolean?
  neuropsicomotor_sentou_meses                                 String?
  neuropsicomotor_sentou_status                                String?
  neuropsicomotor_sentou_nao_realiza                           Boolean?
  neuropsicomotor_sentou_nao_soube_informar                    Boolean?
  neuropsicomotor_sentou_nao                                   Boolean?
  neuropsicomotor_engatinhou_meses                             String?
  neuropsicomotor_engatinhou_status                            String?
  neuropsicomotor_engatinhou_nao_realiza                       Boolean?
  neuropsicomotor_engatinhou_nao_soube_informar                Boolean?
  neuropsicomotor_engatinhou_nao                               Boolean?
  neuropsicomotor_andou_com_apoio_meses                        String?
  neuropsicomotor_andou_com_apoio_status                       String?
  neuropsicomotor_andou_com_apoio_nao_realiza                  Boolean?
  neuropsicomotor_andou_com_apoio_nao_soube_informar           Boolean?
  neuropsicomotor_andou_com_apoio_nao                          Boolean?
  neuropsicomotor_andou_sem_apoio_meses                        String?
  neuropsicomotor_andou_sem_apoio_status                       String?
  neuropsicomotor_andou_sem_apoio_nao_realiza                  Boolean?
  neuropsicomotor_andou_sem_apoio_nao_soube_informar           Boolean?
  neuropsicomotor_andou_sem_apoio_nao                          Boolean?
  neuropsicomotor_correu_meses                                 String?
  neuropsicomotor_correu_status                                String?
  neuropsicomotor_correu_nao_realiza                           Boolean?
  neuropsicomotor_correu_nao_soube_informar                    Boolean?
  neuropsicomotor_correu_nao                                   Boolean?
  neuropsicomotor_andou_de_motoca_meses                        String?
  neuropsicomotor_andou_de_motoca_status                       String?
  neuropsicomotor_andou_de_motoca_nao_realiza                  Boolean?
  neuropsicomotor_andou_de_motoca_nao_soube_informar           Boolean?
  neuropsicomotor_andou_de_motoca_nao                          Boolean?
  neuropsicomotor_andou_de_bicicleta_meses                     String?
  neuropsicomotor_andou_de_bicicleta_status                    String?
  neuropsicomotor_andou_de_bicicleta_nao_realiza               Boolean?
  neuropsicomotor_andou_de_bicicleta_nao_soube_informar        Boolean?
  neuropsicomotor_andou_de_bicicleta_nao                       Boolean?
  neuropsicomotor_subiu_escadas_sozinho_meses                  String?
  neuropsicomotor_subiu_escadas_sozinho_status                 String?
  neuropsicomotor_subiu_escadas_sozinho_nao_realiza            Boolean?
  neuropsicomotor_subiu_escadas_sozinho_nao_soube_informar     Boolean?
  neuropsicomotor_subiu_escadas_sozinho_nao                    Boolean?
  neuropsicomotor_motricidade_fina                             String                            @db.Text
  fala_linguagem_balbuciou_meses                               String?
  fala_linguagem_balbuciou_status                              String?
  fala_linguagem_balbuciou_nao_realiza                         Boolean?
  fala_linguagem_balbuciou_nao_soube_informar                  Boolean?
  fala_linguagem_balbuciou_nao                                 Boolean?
  fala_linguagem_primeiras_palavras_meses                      String?
  fala_linguagem_primeiras_palavras_status                     String?
  fala_linguagem_primeiras_palavras_nao_realiza                Boolean?
  fala_linguagem_primeiras_palavras_nao_soube_informar         Boolean?
  fala_linguagem_primeiras_palavras_nao                        Boolean?
  fala_linguagem_primeiras_frases_meses                        String?
  fala_linguagem_primeiras_frases_status                       String?
  fala_linguagem_primeiras_frases_nao_realiza                  Boolean?
  fala_linguagem_primeiras_frases_nao_soube_informar           Boolean?
  fala_linguagem_primeiras_frases_nao                          Boolean?
  fala_linguagem_apontou_para_fazer_pedidos_meses              String?
  fala_linguagem_apontou_para_fazer_pedidos_status             String?
  fala_linguagem_apontou_para_fazer_pedidos_nao_realiza        Boolean?
  fala_linguagem_apontou_para_fazer_pedidos_nao_soube_informar Boolean?
  fala_linguagem_apontou_para_fazer_pedidos_nao                Boolean?
  fala_linguagem_faz_uso_de_gestos                             Boolean?
  fala_linguagem_faz_uso_de_gestos_quais                       String                            @db.Text
  fala_linguagem_audicao                                       String?
  fala_linguagem_teve_otite_de_repeticao                       Boolean?
  fala_linguagem_otite_vezes                                   Int?
  fala_linguagem_otite_periodo_meses                           Int?
  fala_linguagem_otite_frequencia                              String?
  fala_linguagem_otite_detalhes                                String?                           @db.Text
  fala_linguagem_faz_ou_fez_uso_tubo_ventilacao                Boolean?
  fala_linguagem_tubo_ventilacao_observacao                    String                            @db.Text
  fala_linguagem_faz_ou_fez_uso_objeto_oral                    Boolean?
  fala_linguagem_objeto_oral_especificar                       String                            @db.Text
  fala_linguagem_usa_mamadeira                                 Boolean?
  fala_linguagem_mamadeira_ha                                  String?
  fala_linguagem_mamadeira_vezes_ao_dia                        Int?
  fala_linguagem_mamadeira_detalhes                            String?                           @db.Text
  fala_linguagem_comunicacao_atual                             String                            @db.Text
  desfralde_diurno_urina_anos                                  String
  desfralde_diurno_urina_meses                                 String
  desfralde_diurno_urina_utiliza_fralda                        Boolean
  desfralde_noturno_urina_anos                                 String
  desfralde_noturno_urina_meses                                String
  desfralde_noturno_urina_utiliza_fralda                       Boolean
  desfralde_fezes_anos                                         String
  desfralde_fezes_meses                                        String
  desfralde_fezes_utiliza_fralda                               Boolean
  desfralde_se_limpa_sozinho_urinar                            Boolean?
  desfralde_se_limpa_sozinho_defecar                           Boolean?
  desfralde_lava_as_maos_apos_uso_banheiro                     Boolean?
  desfralde_apresenta_alteracao_habito_intestinal              Boolean?
  desfralde_observacoes                                        String                            @db.Text
  sono_dormem_media_horas_noite                                String
  sono_dormem_media_horas_dia                                  String
  sono_periodo_sono_dia                                        String?
  sono_tem_dificuldade_iniciar_sono                            Boolean?
  sono_acorda_de_madrugada                                     Boolean?
  sono_dorme_na_propria_cama                                   Boolean?
  sono_dorme_no_proprio_quarto                                 Boolean?
  sono_apresenta_sono_agitado                                  Boolean?
  sono_e_sonambulo                                             Boolean?
  sono_observacoes                                             String                            @db.Text
  habitos_higiene_toma_banho_lava_corpo_todo                   AjudaStatus?
  habitos_higiene_seca_corpo_todo                              AjudaStatus?
  habitos_higiene_retira_todas_pecas_roupa                     AjudaStatus?
  habitos_higiene_coloca_todas_pecas_roupa                     AjudaStatus?
  habitos_higiene_poe_calcados_sem_cadarco                     AjudaStatus?
  habitos_higiene_poe_calcados_com_cadarco                     AjudaStatus?
  habitos_higiene_escova_os_dentes                             AjudaStatus?
  habitos_higiene_penteia_o_cabelo                             AjudaStatus?
  habitos_higiene_observacoes                                  String                            @db.Text
  alimentacao_apresenta_queixa_alimentacao                     Boolean?
  alimentacao_se_alimenta_sozinho                              Boolean?
  alimentacao_e_seletivo_quanto_alimentos                      Boolean?
  alimentacao_passa_dia_inteiro_sem_comer                      Boolean?
  alimentacao_apresenta_rituais_para_alimentar                 Boolean?
  alimentacao_esta_abaixo_ou_acima_peso                        Boolean?
  alimentacao_esta_abaixo_ou_acima_peso_descricao              String                            @db.Text
  alimentacao_tem_historico_anemia                             Boolean?
  alimentacao_tem_historico_anemia_descricao                   String                            @db.Text
  alimentacao_rotina_alimentar_e_problema_familia              Boolean?
  alimentacao_rotina_alimentar_e_problema_familia_descricao    String                            @db.Text
  alimentacao_observacoes                                      String                            @db.Text
  desenvolvimento_social_possui_amigos_mesma_idade_escola      Boolean?
  desenvolvimento_social_possui_amigos_mesma_idade_fora_escola Boolean?
  desenvolvimento_social_faz_uso_funcional_brinquedos          Boolean?
  desenvolvimento_social_brinca_proximo_aos_colegas            Boolean?
  desenvolvimento_social_brinca_conjunta_com_colegas           Boolean?
  desenvolvimento_social_procura_colegas_espontaneamente       Boolean?
  desenvolvimento_social_se_verbal_inicia_conversa             Boolean?
  desenvolvimento_social_se_verbal_responde_perguntas_simples  Boolean?
  desenvolvimento_social_faz_pedidos_quando_necessario         Boolean?
  desenvolvimento_social_estabelece_contato_visual_adultos     Boolean?
  desenvolvimento_social_estabelece_contato_visual_criancas    Boolean?
  desenvolvimento_social_observacoes                           String                            @db.Text
  desenvolvimento_social_brinca_com_outras_criancas            Boolean?
  desenvolvimento_social_tipo_brincadeira                      String?                           @db.Text
  desenvolvimento_social_mantem_contato_visual                 Boolean?
  desenvolvimento_social_responde_ao_chamar                    Boolean?
  desenvolvimento_social_compartilha_interesses                Boolean?
  desenvolvimento_social_compreende_sentimentos                Boolean?
  desenvolvimento_academico_escola                             String
  desenvolvimento_academico_ano                                String?
  desenvolvimento_academico_periodo                            String
  desenvolvimento_academico_direcao                            String
  desenvolvimento_academico_coordenacao                        String
  desenvolvimento_academico_professora_principal               String
  desenvolvimento_academico_professora_assistente              String
  desenvolvimento_academico_frequenta_escola_regular           Boolean?
  desenvolvimento_academico_frequenta_escola_especial          Boolean?
  desenvolvimento_academico_demandas_pedagogicas               Boolean?
  desenvolvimento_academico_segue_regras_rotina_sala_aula      Boolean?
  desenvolvimento_academico_necessita_apoio_at                 Boolean?
  desenvolvimento_academico_necessita_adaptacao_materiais      Boolean?
  desenvolvimento_academico_necessita_adaptacao_curricular     Boolean?
  desenvolvimento_academico_houve_reprovacao_retencao          Boolean?
  desenvolvimento_academico_escola_possui_equipe_inclusao      Boolean?
  desenvolvimento_academico_deficiencia_intelectual            Boolean?
  desenvolvimento_academico_queixa_comportamental              Boolean?
  desenvolvimento_academico_adaptacao_escolar                  String                            @db.Text
  desenvolvimento_academico_dificuldades_escolares             String                            @db.Text
  desenvolvimento_academico_relacionamento_com_colegas         String                            @db.Text
  desenvolvimento_academico_observacoes                        String                            @db.Text
  estereotipias_rituais_balanca_maos_lado_corpo_ou_frente      Boolean?
  estereotipias_rituais_balanca_corpo_frente_para_tras         Boolean?
  estereotipias_rituais_pula_ou_gira_em_torno_de_si            Boolean?
  estereotipias_rituais_repete_sons_sem_funcao_comunicativa    Boolean?
  estereotipias_rituais_repete_movimentos_continuos            Boolean?
  estereotipias_rituais_explora_ambiente_lambendo_tocando      Boolean?
  estereotipias_rituais_procura_observar_objetos_canto_olho    Boolean?
  estereotipias_rituais_organiza_objetos_lado_a_lado           Boolean?
  estereotipias_rituais_realiza_tarefas_sempre_mesma_ordem     Boolean?
  estereotipias_rituais_apresenta_rituais_diarios              Boolean?
  estereotipias_rituais_observacoes_topografias                String                            @db.Text
  problemas_comportamento_auto_lesivos                         Boolean?
  problemas_comportamento_auto_lesivos_quais                   String                            @db.Text
  problemas_comportamento_heteroagressivos                     Boolean?
  problemas_comportamento_heteroagressivos_quais               String                            @db.Text
  problemas_comportamento_apresenta_destruicao_propriedade     Boolean?
  problemas_comportamento_destruicao_descrever                 String                            @db.Text
  problemas_comportamento_necessitou_contencao_mecanica        Boolean?
  problemas_comportamento_observacoes_topografias              String                            @db.Text
  finalizacao_outras_informacoes_relevantes                    String?                           @db.Text
  finalizacao_informacoes_adicionais                           String?                           @db.Text
  finalizacao_observacoes_impressoes_terapeuta                 String?                           @db.Text
  finalizacao_observacoes_finais                               String?                           @db.Text
  finalizacao_expectativas_familia                             String                            @db.Text
  criado_em                                                    DateTime                          @default(now())
  atualizado_em                                                DateTime                          @updatedAt
  cliente                                                      cliente                           @relation(fields: [cliente_id], references: [id])
  terapeuta                                                    terapeuta                         @relation(fields: [terapeuta_id], references: [id])
  especialidadesConsultadas                                    AnamneseEspecialidadeConsultada[]
  medicamentosEmUso                                            AnamneseMedicamentoEmUso[]
  examesPrevios                                                AnamneseExamePrevio[]
  terapiasPrevias                                              AnamneseTerapiaPrevia[]
  historicosFamiliares                                         AnamneseHistoricoFamiliar[]
  atividadesRotina                                             AnamneseAtividadeRotina[]
  cuidadores                                                   AnamneseCuidador[]

  @@index([cliente_id])
  @@index([terapeuta_id])
  @@map("anamnese")
}

model AnamneseEspecialidadeConsultada {
  id            Int      @id @default(autoincrement())
  anamnese_id   String
  external_id   String?
  especialidade String
  nome          String
  data          DateTime @db.Date
  observacao    String?  @db.Text
  ativo         Boolean
  anamnese      Anamnese @relation(fields: [anamnese_id], references: [id], onDelete: Cascade)

  @@index([anamnese_id], map: "anamnese_especialidade_consultada_anamnese_id_fkey")
  @@map("anamnese_especialidade_consultada")
}

model AnamneseMedicamentoEmUso {
  id          Int      @id @default(autoincrement())
  anamnese_id String
  external_id String?
  nome        String
  dosagem     String
  data_inicio DateTime @db.Date
  motivo      String   @db.Text
  anamnese    Anamnese @relation(fields: [anamnese_id], references: [id], onDelete: Cascade)

  @@index([anamnese_id], map: "anamnese_medicamento_em_uso_anamnese_id_fkey")
  @@map("anamnese_medicamento_em_uso")
}

model AnamneseExamePrevio {
  id          Int                    @id @default(autoincrement())
  anamnese_id String
  external_id String?
  nome        String
  data        DateTime               @db.Date
  resultado   String                 @db.Text
  anamnese    Anamnese               @relation(fields: [anamnese_id], references: [id], onDelete: Cascade)
  arquivos    AnamneseExameArquivo[]

  @@index([anamnese_id], map: "anamnese_exame_previo_anamnese_id_fkey")
  @@map("anamnese_exame_previo")
}

model AnamneseExameArquivo {
  id              Int                 @id @default(autoincrement())
  exame_previo_id Int
  external_id     String?
  nome            String
  tipo            String
  tamanho         Int
  url             String?             @db.Text
  file            Json?
  examePrevio     AnamneseExamePrevio @relation(fields: [exame_previo_id], references: [id], onDelete: Cascade)

  @@index([exame_previo_id], map: "anamnese_exame_arquivo_exame_previo_id_fkey")
  @@map("anamnese_exame_arquivo")
}

model AnamneseTerapiaPrevia {
  id                      Int      @id @default(autoincrement())
  anamnese_id             String
  external_id             String?
  profissional            String
  especialidade_abordagem String
  tempo_intervencao       String
  observacao              String?  @db.Text
  ativo                   Boolean
  anamnese                Anamnese @relation(fields: [anamnese_id], references: [id], onDelete: Cascade)

  @@index([anamnese_id], map: "anamnese_terapia_previa_anamnese_id_fkey")
  @@map("anamnese_terapia_previa")
}

model AnamneseHistoricoFamiliar {
  id                   Int      @id @default(autoincrement())
  anamnese_id          String
  external_id          String?
  condicao_diagnostico String?  @db.Text
  condicao             String?  @db.Text
  parentesco           String
  observacao           String?  @db.Text
  anamnese             Anamnese @relation(fields: [anamnese_id], references: [id], onDelete: Cascade)

  @@index([anamnese_id], map: "anamnese_historico_familiar_anamnese_id_fkey")
  @@map("anamnese_historico_familiar")
}

model AnamneseAtividadeRotina {
  id          Int      @id @default(autoincrement())
  anamnese_id String
  external_id String?
  atividade   String
  horario     String
  responsavel String?
  frequencia  String?
  observacao  String?  @db.Text
  anamnese    Anamnese @relation(fields: [anamnese_id], references: [id], onDelete: Cascade)

  @@index([anamnese_id], map: "anamnese_atividade_rotina_anamnese_id_fkey")
  @@map("anamnese_atividade_rotina")
}

model AnamneseCuidador {
  id          Int      @id @default(autoincrement())
  anamnese_id String
  cuidador_id Int
  anamnese    Anamnese @relation(fields: [anamnese_id], references: [id], onDelete: Cascade)
  cuidador    cuidador @relation(fields: [cuidador_id], references: [id], onDelete: Cascade)

  @@unique([anamnese_id, cuidador_id], name: "unique_anamnese_cuidador")
  @@index([cuidador_id], map: "anamnese_cuidador_cuidador_id_fkey")
  @@map("anamnese_cuidador")
}

model formacao {
  id                      Int             @id @default(autoincrement())
  graduacao               String?
  instituicao_graduacao   String?
  ano_formatura           Int?
  participacao_congressos String?         @db.Text
  publicacoes_descricao   String?         @db.Text
  terapeuta_id            String          @unique
  terapeuta               terapeuta       @relation(fields: [terapeuta_id], references: [id])
  pos_graduacao           pos_graduacao[]

  @@index([terapeuta_id], map: "formacao_terapeuta_id_fkey")
}

model pos_graduacao {
  id          Int      @id @default(autoincrement())
  tipo        String?
  curso       String?
  instituicao String?
  conclusao   String?
  formacao_id Int
  formacao    formacao @relation(fields: [formacao_id], references: [id])

  @@index([formacao_id], map: "pos_graduacao_formacao_id_fkey")
}

model registro_profissional {
  id              Int          @id @default(autoincrement())
  numero_conselho String?
  terapeuta_id    String
  area_atuacao_id Int
  cargo_id        Int?
  area_atuacao    area_atuacao @relation(fields: [area_atuacao_id], references: [id])
  cargo           cargo?       @relation(fields: [cargo_id], references: [id])
  terapeuta       terapeuta    @relation(fields: [terapeuta_id], references: [id])

  @@index([area_atuacao_id])
  @@index([cargo_id])
  @@index([terapeuta_id], map: "registro_profissional_terapeuta_id_fkey")
}

model pessoa_juridica {
  id           Int       @id @default(autoincrement())
  cnpj         String?   @unique
  razao_social String?
  endereco_id  Int
  terapeuta_id String    @unique
  endereco     endereco  @relation(fields: [endereco_id], references: [id])
  terapeuta    terapeuta @relation(fields: [terapeuta_id], references: [id])

  @@index([endereco_id], map: "pessoa_juridica_endereco_id_fkey")
}

model disciplina {
  id        Int         @id @default(autoincrement())
  nome      String      @unique
  terapeuta terapeuta[] @relation("disciplinaToterapeuta")
}

model sessao_trial {
  id               Int    @id @default(autoincrement())
  sessao_id        Int
  estimulos_ocp_id Int
  ordem            Int
  resultado        String
  duracao_minutos  Int?

  // Fisioterapia
  utilizou_carga        Boolean?
  valor_carga           Float?
  teve_desconforto      Boolean?
  descricao_desconforto String?
  teve_compensacao      Boolean?
  descricao_compensacao String?

  // Musicoterapia
  participacao Int?
  suporte      Int?

  estimulosOcp estimulo_ocp @relation(fields: [estimulos_ocp_id], references: [id], onDelete: Cascade)
  sessao       sessao       @relation(fields: [sessao_id], references: [id], onDelete: Cascade)

  @@index([sessao_id])
  @@index([estimulos_ocp_id])
}

model sessao {
  id                 Int              @id @default(autoincrement())
  ocp_id             Int
  cliente_id         String
  terapeuta_id       String
  data_criacao       DateTime         @default(now())
  criado_em          DateTime         @default(now())
  atualizado_em      DateTime         @updatedAt
  observacoes_sessao String?          @db.Text
  area               String
  cliente            cliente          @relation(fields: [cliente_id], references: [id])
  ocp                ocp              @relation(fields: [ocp_id], references: [id], onDelete: Cascade)
  terapeuta          terapeuta        @relation(fields: [terapeuta_id], references: [id])
  trials             sessao_trial[]
  arquivos           sessao_arquivo[]

  @@index([terapeuta_id, data_criacao])
  @@index([ocp_id])
  @@index([area])
  @@index([ocp_id, area])
  @@index([cliente_id], map: "sessao_cliente_id_fkey")
}

model estimulo {
  id        Int            @id @default(autoincrement())
  nome      String         @unique
  descricao String?        @db.Text
  ocps      estimulo_ocp[]
}

model estimulo_ocp {
  id                     Int            @id @default(autoincrement())
  id_estimulo            Int
  id_ocp                 Int
  nome                   String?
  descricao              String?        @db.Text
  metodos                String?        @db.Text
  tecnicas_procedimentos String?        @db.Text
  status                 Boolean
  estimulo               estimulo       @relation(fields: [id_estimulo], references: [id], onDelete: Cascade)
  ocp                    ocp            @relation(fields: [id_ocp], references: [id], onDelete: Cascade)
  trials                 sessao_trial[]

  @@unique([id_estimulo, id_ocp])
  @@index([id_ocp], map: "estimulo_ocp_id_ocp_fkey")
}

model ocp {
  id                    Int            @id @default(autoincrement())
  cliente_id            String
  terapeuta_id          String
  nome_programa         String
  data_inicio           DateTime
  data_fim              DateTime
  objetivo_programa     String?
  objetivo_descricao    String?        @db.Text
  criterio_aprendizagem String?        @db.Text
  objetivo_curto        String?        @db.Text
  descricao_aplicacao   String?        @db.Text
  observacao_geral      String?        @db.Text
  criado_em             DateTime       @default(now())
  atualizado_em         DateTime       @updatedAt
  status                String         @default("ativado")
  area                  String
  desempenho_atual      String?        @db.Text
  estimulo_ocp          estimulo_ocp[]
  cliente               cliente        @relation(fields: [cliente_id], references: [id])
  terapeuta             terapeuta      @relation("TerapeutaOcp", fields: [terapeuta_id], references: [id])
  sessoes               sessao[]

  @@index([cliente_id])
  @@index([area])
  @@index([cliente_id, area])
  @@index([nome_programa])
  @@index([terapeuta_id], map: "ocp_terapeuta_id_fkey")
}

model terapeuta_cliente {
  id            Int       @id @default(autoincrement())
  terapeuta_id  String
  cliente_id    String
  atualizado_em DateTime  @updatedAt
  criado_em     DateTime  @default(now())
  data_fim      DateTime?
  data_inicio   DateTime
  observacoes   String?   @db.Text
  papel         String    @default("responsible")
  status        String    @default("active")
  area_atuacao  String?
  cliente       cliente   @relation(fields: [cliente_id], references: [id], onDelete: Cascade)
  terapeuta     terapeuta @relation(fields: [terapeuta_id], references: [id], onDelete: Cascade)

  @@index([terapeuta_id])
  @@index([cliente_id])
}

model vinculo_supervisao {
  id                Int       @id @default(autoincrement())
  supervisor_id     String
  clinico_id        String
  nivel_hierarquia  Int?      @default(1)
  escopo_supervisao String?   @default("direto")
  data_inicio       DateTime
  data_fim          DateTime?
  status            String    @default("ativo")
  observacoes       String?
  criado_em         DateTime  @default(now())
  atualizado_em     DateTime  @updatedAt
  clinico           terapeuta @relation("ClinicoVinculo", fields: [clinico_id], references: [id], onDelete: Cascade)
  supervisor        terapeuta @relation("SupervisorVinculo", fields: [supervisor_id], references: [id], onDelete: Cascade)

  @@unique([supervisor_id, clinico_id])
  @@index([supervisor_id])
  @@index([clinico_id])
}

model sessao_arquivo {
  id            Int      @id @default(autoincrement())
  sessao_id     Int
  nome          String
  caminho       String
  tamanho       Int
  criado_em     DateTime @default(now())
  atualizado_em DateTime @updatedAt

  sessao sessao @relation(fields: [sessao_id], references: [id], onDelete: Cascade)

  @@index([sessao_id])
}
